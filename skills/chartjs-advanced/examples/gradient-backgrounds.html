<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chart.js Gradient Backgrounds</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.1"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 { text-align: center; color: #333; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }
    .chart-container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .chart-container h3 {
      margin: 0 0 15px 0;
      color: #555;
      font-size: 14px;
    }
    canvas { max-height: 250px; }
  </style>
</head>
<body>
  <h1>Chart.js Gradient Patterns</h1>
  <div class="grid">
    <div class="chart-container">
      <h3>Vertical Gradient (Top to Bottom)</h3>
      <canvas id="verticalGradient"></canvas>
    </div>
    <div class="chart-container">
      <h3>Horizontal Gradient (Left to Right)</h3>
      <canvas id="horizontalGradient"></canvas>
    </div>
    <div class="chart-container">
      <h3>Three-Color Gradient</h3>
      <canvas id="threeColorGradient"></canvas>
    </div>
    <div class="chart-container">
      <h3>Radial Gradient (Doughnut)</h3>
      <canvas id="radialGradient"></canvas>
    </div>
    <div class="chart-container">
      <h3>Multi-Dataset Gradients</h3>
      <canvas id="multiDataset"></canvas>
    </div>
    <div class="chart-container">
      <h3>Diagonal Gradient</h3>
      <canvas id="diagonalGradient"></canvas>
    </div>
  </div>

  <script>
    // Shared data
    const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
    const sampleData = [12, 19, 8, 15, 22, 17];

    // Gradient helper functions
    function createVerticalGradient(ctx, chartArea, colorTop, colorBottom) {
      const gradient = ctx.createLinearGradient(0, chartArea.top, 0, chartArea.bottom);
      gradient.addColorStop(0, colorTop);
      gradient.addColorStop(1, colorBottom);
      return gradient;
    }

    function createHorizontalGradient(ctx, chartArea, colorLeft, colorRight) {
      const gradient = ctx.createLinearGradient(chartArea.left, 0, chartArea.right, 0);
      gradient.addColorStop(0, colorLeft);
      gradient.addColorStop(1, colorRight);
      return gradient;
    }

    function createThreeColorGradient(ctx, chartArea) {
      const gradient = ctx.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
      gradient.addColorStop(0, 'rgba(255, 99, 132, 0.2)');
      gradient.addColorStop(0.5, 'rgba(255, 206, 86, 0.5)');
      gradient.addColorStop(1, 'rgba(75, 192, 192, 1)');
      return gradient;
    }

    function createRadialGradient(ctx, chartArea) {
      const centerX = (chartArea.left + chartArea.right) / 2;
      const centerY = (chartArea.top + chartArea.bottom) / 2;
      const radius = Math.min(
        chartArea.right - chartArea.left,
        chartArea.bottom - chartArea.top
      ) / 2;

      const gradient = ctx.createRadialGradient(
        centerX, centerY, 0,
        centerX, centerY, radius
      );
      gradient.addColorStop(0, 'rgba(255, 99, 132, 1)');
      gradient.addColorStop(0.5, 'rgba(255, 99, 132, 0.5)');
      gradient.addColorStop(1, 'rgba(255, 99, 132, 0.1)');
      return gradient;
    }

    function createDiagonalGradient(ctx, chartArea) {
      const gradient = ctx.createLinearGradient(
        chartArea.left, chartArea.top,
        chartArea.right, chartArea.bottom
      );
      gradient.addColorStop(0, 'rgba(255, 99, 132, 1)');
      gradient.addColorStop(1, 'rgba(54, 162, 235, 1)');
      return gradient;
    }

    // Scriptable background helper (handles initial render when chartArea is undefined)
    function scriptableGradient(gradientFn) {
      return function(context) {
        const chart = context.chart;
        const { ctx, chartArea } = chart;
        if (!chartArea) return null;
        return gradientFn(ctx, chartArea);
      };
    }

    // 1. Vertical Gradient
    new Chart(document.getElementById('verticalGradient'), {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Sales',
          data: sampleData,
          backgroundColor: scriptableGradient((ctx, chartArea) =>
            createVerticalGradient(ctx, chartArea,
              'rgba(75, 192, 192, 0.8)',
              'rgba(75, 192, 192, 0.1)'
            )
          ),
          borderColor: 'rgb(75, 192, 192)',
          fill: true,
          tension: 0.4
        }]
      },
      options: { responsive: true, plugins: { legend: { display: false } } }
    });

    // 2. Horizontal Gradient
    new Chart(document.getElementById('horizontalGradient'), {
      type: 'bar',
      data: {
        labels,
        datasets: [{
          label: 'Revenue',
          data: sampleData,
          backgroundColor: scriptableGradient((ctx, chartArea) =>
            createHorizontalGradient(ctx, chartArea,
              'rgba(54, 162, 235, 1)',
              'rgba(153, 102, 255, 1)'
            )
          ),
          borderWidth: 0
        }]
      },
      options: { responsive: true, plugins: { legend: { display: false } } }
    });

    // 3. Three-Color Gradient
    new Chart(document.getElementById('threeColorGradient'), {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Performance',
          data: sampleData,
          backgroundColor: scriptableGradient(createThreeColorGradient),
          borderColor: 'rgba(75, 192, 192, 1)',
          fill: true,
          tension: 0.4
        }]
      },
      options: { responsive: true, plugins: { legend: { display: false } } }
    });

    // 4. Radial Gradient (Doughnut)
    const doughnutColors = [
      { inner: 'rgba(255, 99, 132, 1)', outer: 'rgba(255, 99, 132, 0.3)' },
      { inner: 'rgba(54, 162, 235, 1)', outer: 'rgba(54, 162, 235, 0.3)' },
      { inner: 'rgba(255, 206, 86, 1)', outer: 'rgba(255, 206, 86, 0.3)' }
    ];

    new Chart(document.getElementById('radialGradient'), {
      type: 'doughnut',
      data: {
        labels: ['Red', 'Blue', 'Yellow'],
        datasets: [{
          data: [300, 150, 100],
          backgroundColor: function(context) {
            const chart = context.chart;
            const { ctx, chartArea } = chart;
            if (!chartArea) return null;

            const centerX = (chartArea.left + chartArea.right) / 2;
            const centerY = (chartArea.top + chartArea.bottom) / 2;
            const radius = Math.min(
              chartArea.right - chartArea.left,
              chartArea.bottom - chartArea.top
            ) / 2;

            const colors = doughnutColors[context.dataIndex];
            const gradient = ctx.createRadialGradient(
              centerX, centerY, 0,
              centerX, centerY, radius
            );
            gradient.addColorStop(0, colors.inner);
            gradient.addColorStop(1, colors.outer);
            return gradient;
          },
          borderWidth: 2,
          borderColor: '#fff'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });

    // 5. Multi-Dataset Gradients
    const colorSchemes = [
      { top: 'rgba(255, 99, 132, 0.8)', bottom: 'rgba(255, 99, 132, 0.1)' },
      { top: 'rgba(54, 162, 235, 0.8)', bottom: 'rgba(54, 162, 235, 0.1)' },
      { top: 'rgba(255, 206, 86, 0.8)', bottom: 'rgba(255, 206, 86, 0.1)' }
    ];

    new Chart(document.getElementById('multiDataset'), {
      type: 'line',
      data: {
        labels,
        datasets: colorSchemes.map((scheme, i) => ({
          label: `Dataset ${i + 1}`,
          data: sampleData.map(v => v + (i * 5) + Math.random() * 5),
          backgroundColor: scriptableGradient((ctx, chartArea) =>
            createVerticalGradient(ctx, chartArea, scheme.top, scheme.bottom)
          ),
          borderColor: scheme.top,
          fill: true,
          tension: 0.4
        }))
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } }
      }
    });

    // 6. Diagonal Gradient
    new Chart(document.getElementById('diagonalGradient'), {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Trend',
          data: sampleData,
          backgroundColor: scriptableGradient(createDiagonalGradient),
          borderColor: 'rgba(153, 102, 255, 1)',
          fill: true,
          tension: 0.4
        }]
      },
      options: { responsive: true, plugins: { legend: { display: false } } }
    });
  </script>
</body>
</html>
